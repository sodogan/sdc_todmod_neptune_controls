sap.ui.define(["./library","sap/ui/core/Control","./ElementHelper","./BackgroundSupport","./TextSupport","./BorderSupport"],function(t,e,n,o,s,i){"use strict";const a={library:"nep.bootstrap",properties:{position:{type:"nep.bootstrap.ToastPosition",defaultValue:t.ToastPosition.BottomCenter},delay:{type:"int",defaultValue:5e3},autohide:{type:"boolean",defaultValue:!0},animation:{type:"boolean",defaultValue:!0},title:{type:"string"},message:{type:"string"}},aggregations:{header:{type:"sap.ui.core.Control",multiple:!0},content:{type:"sap.ui.core.Control",multiple:!0}},events:{show:{},shown:{},hide:{},hidden:{}}};n.addMetadata(a),o.addMetadata(a),s.addMetadata(a),i.addMetadata(a);const r=e.extend("nep.bootstrap.Toast",{metadata:a,renderer:function(t,e){let n=e.getTitle(),o=e.getMessage(),s=e.getContent(),i=e.getHeader();if(t.openStart("div",e),t.addClass(e.createStyleClass()),t.attr("role","alert"),t.attr("aria-live","assertive"),t.attr("aria-atomic","true"),t.openEnd(),n||i.length){if(t.openStart("div",e.createSubId("header")),t.class("toast-header"),t.class(e.createStyleClass("header")),t.openEnd(),i.length){n&&(t.openStart("span"),t.openEnd(),t.text(n),t.close("span"));for(let e=0;e<i.length;e++)t.renderControl(i[e])}else t.text(n);t.close("div")}if(o||s.length){if(t.openStart("div",e.createSubId("body")),t.class("toast-body"),t.class(e.createStyleClass("body")),t.openEnd(),s.length){o&&(t.openStart("span"),t.openEnd(),t.text(o),t.close("span"));for(let e=0;e<s.length;e++)t.renderControl(s[e])}else t.text(o);t.close("div")}t.close("div")}}),d=r.prototype;return r.getStylePrefix=function(){return"nbsToast"},d.getAdditionalStyleClass=function(){let t="toast "+(this.m_bShown?"show":"hide");return t+=o.createStyleClass(r,this),t+=s.createStyleClass(r,this),t+=i.createStyleClass(r,this)},n.addHelpers(r),d.exit=function(){let t=this.getParent();if(!t)return;let e=t.oRootNode;if(!e)return;let n=e.firstChild;if(!n)return;this.m_fnShow&&n.removeEventListener("show.bs.toast",this.m_fnShow),this.m_fnShown&&n.removeEventListener("shown.bs.toast",this.m_fnShown),this.m_fnHide&&n.removeEventListener("hide.bs.toast",this.m_fnHide),this.m_fnHidden&&n.removeEventListener("hidden.bs.toast",this.m_fnHidden);let o=r.createStyleClass(this.getPosition()),s=document.getElementById(o);s.removeChild(e),requestAnimationFrame(function(){if(s&&!s.children.length)try{document.body.removeChild(s)}catch(t){console.warn(t)}}),this.m_fnShow=null,this.m_fnShown=null,this.m_fnHide=null,this.m_fnHidden=null,this.m_oToast=null},d.onBeforeRendering=function(t){if(!this.m_oToast)return;let e=this.getParent();if(!e)return;let n=e.oRootNode;if(!n)return;let o=n.firstChild;o&&(this.m_fnShow&&o.removeEventListener("show.bs.toast",this.m_fnShow),this.m_fnShown&&o.removeEventListener("shown.bs.toast",this.m_fnShown),this.m_fnHide&&o.removeEventListener("hide.bs.toast",this.m_fnHide),this.m_fnHidden&&o.removeEventListener("hidden.bs.toast",this.m_fnHidden))},d.onAfterRendering=function(t){let e=this.getParent();if(!e)throw new Error("Cannot access parent UIArea!");let n=e.oRootNode;if(!n)throw new Error("Cannot access DOM of parent UIArea!");let o=this,s=n.firstChild;if(!s)throw new Error("Toast is not first child of UIArea!");this.m_oToast=new bootstrap.Toast(s,{delay:this.getDelay(),autohide:this.getAutohide(),animation:this.getAnimation()}),this.m_fnShow=function(){o.fireShow()},this.m_fnShown=function(){o.fireShown()},this.m_fnHide=function(){o.fireHide()},this.m_fnHidden=function(){o.fireHidden(),requestAnimationFrame(function(){o.destroy()})},s.addEventListener("show.bs.toast",this.m_fnShow),s.addEventListener("shown.bs.toast",this.m_fnShown),s.addEventListener("hide.bs.toast",this.m_fnHide),s.addEventListener("hidden.bs.toast",this.m_fnHidden)},d.show=function(){let t=this,e=document.createElement("div");this.placeAt(e),setTimeout(function(){r.getToastContainer(t.getPosition()).appendChild(e),requestAnimationFrame(function(){t.m_bShown=!0,t.m_oToast.show()})},25)},d.hide=function(){this.m_oToast?this.m_oToast.hide():console.error("Cannot hide toast: toast has never been shown.")},r._positionToCss={TopLeft:"top-0 start-0",TopCenter:"top-0 start-50 translate-middle-x",TopRight:"top-0 end-0",MiddleLeft:"top-50 start-0 translate-middle-y",MiddleCenter:"top-50 start-50 translate-middle",MiddleRight:"top-50 end-0 translate-middle-y",BottomLeft:"bottom-0 start-0",BottomCenter:"bottom-0 start-50 translate-middle-x",BottomRight:"bottom-0 end-0"},r.getToastContainer=function(t){let e=r.createStyleClass(t),n=document.getElementById(e);return n||((n=document.createElement("div")).id=e,n.className="toast-container position-fixed p-3 "+r._positionToCss[t],n.style.zIndex=1e4,document.body.appendChild(n)),n},r.show=function(t,e){new r({title:e,message:t}).show()},r});